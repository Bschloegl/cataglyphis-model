<?xml version="1.0"?>
<!-- Synthesis of an Ant Leg -->
<robot name="antmodel" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- Constants for robot dimensions -->
  <xacro:property name="PI" value="3.1415926535897931"/>
  <xacro:property name="mass" value="1" /> <!-- arbitrary value for mass -->
  <xacro:property name="width" value="0.1" /> <!-- Square dimensions (widthxwidth) of beams -->
  <xacro:property name="height1" value="5" /> <!-- Link 1 -->
  <xacro:property name="height2" value="0.1" /> <!-- Link 2 -->
  <xacro:property name="height3" value="0.1" /> <!-- Link 3 -->
  
  <!-- Base transformation parameters -->
  <xacro:property name="AZ" value="4.0127" /> <!-- -1*min(PZ(:,5)) -->
  <xacro:property name="baseX" value="2.5329" /> <!-- link{1,2}(10,1) -->
  <xacro:property name="baseY" value="0.7012" /> <!-- link{1,2}(10,2) -->
  <xacro:property name="baseZ" value="-0.1418" /> <!-- link{1,2}(10,3) -->
  <xacro:property name="baseL" value="2.632" /> <!-- norm(link{1,2}(10,:)) -->
  <xacro:property name="AR" value="-0.9202" /> <!-- tr2rpy(A{50})(1) -->
  <xacro:property name="AP" value="0.1936" /> <!-- tr2rpy(A{50})(2) --> 
  <xacro:property name="AY" value="0.1716" /> <!-- tr2rpy(A{50})(3) -->    

  <!-- Antleg Parameter -->
  <xacro:property name="femur_len" value="1.70"/> <!-- length of femur segment -->
  <xacro:property name="femur_rad" value="0.05"/> <!-- radius of femur segment -->
  <xacro:property name="tibia_len" value="2.60"/> <!-- length of tibia + tarsus segment -->
  <xacro:property name="tibia_rad" value="0.02"/> <!-- length of tibia + tarsus segment  <origin xyz="${baseX} ${baseY} ${baseZ}"/> -->
  

  <!-- Import all Gazebo-customization elements, including Gazebo colors -->
  <xacro:include filename="$(find antmodel_description)/urdf/antmodel.gazebo" />
  <!-- Import Rviz colors -->
  <xacro:include filename="$(find antmodel_description)/urdf/materials.xacro" />

  <xacro:property name="connection_offset" value="4" />
  <xacro:property name="connection_offset1" value="2" />


<link name="body">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
	<box size="1 1 1"/>
      </geometry>
    </visual>
    
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
	<box size="1 1 1"/>
      </geometry>
    </collision>

    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="${mass}"/>
      <inertia
	  ixx="0.0" ixy="0.0" ixz="0.0"
	  iyy="0.0" iyz="0.0"
	  izz="0.0"/>
    </inertial>
  </link>
  

  
      <gazebo reference="body">
    <material>Gazebo/White</material>
  </gazebo>

<xacro:macro name="leg" params="suffix xyz offset">
<link name="c1_${suffix}">
    <visual>
      <origin xyz="0 ${offset} 0" rpy="0 0 0"/>
      <geometry>
	<box size="0.5 0.5 2"/>
      </geometry>
    </visual>
    
    <collision>
      <origin xyz="0 ${offset} 0" rpy="0 0 0"/>
      <geometry>
	<box size="0.5 0.5 2"/>
      </geometry>
    </collision>

    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="${mass}"/>
      <inertia
	  ixx="0.0" ixy="0.0" ixz="0.0"
	  iyy="0.0" iyz="0.0"
	  izz="0.0"/>
    </inertial>
  </link>
  
  <link name="leg_${suffix}">
    <visual>
      <origin xyz="0 -${offset} 0" rpy="0 0 0"/>
      <geometry>
	<box size="1 1 1"/>
      </geometry>
    </visual>
    
    <collision>
      <origin xyz="0 -${offset} 0" rpy="0 0 0"/>
      <geometry>
	<box size="1 1 1"/>
      </geometry>
    </collision>

    <inertial>
      <origin xyz="0 -${offset} 0" rpy="0 0 0"/>
      <mass value="${mass}"/>
      <inertia
	  ixx="0.0" ixy="0.0" ixz="0.0"
	  iyy="0.0" iyz="0.0"
	  izz="0.0"/>
    </inertial>
  </link>
  
  
<joint name="j_body_${suffix}" type="revolute">
        <parent link="body"/>
        <child link="c1_${suffix}"/>
	<origin xyz="${xyz}" rpy=" 0 3.14159 3.14159" />
    <axis xyz="1 0 0" />
    <limit effort="2.8" velocity="5.6548668" lower="-2.6179939" upper="2.6179939" />
</joint>

<joint name="j_antmodel_attachment_${suffix}" type="revolute">
        <parent link="c1_${suffix}"/>
        <child link="leg_${suffix}"/>
	    <origin xyz="0 0 0" rpy=" 0 3.14159 3.14159" />
    <axis xyz="1 0 0" />
    <limit effort="2.8" velocity="5.6548668" lower="-2.6179939" upper="2.6179939" />
</joint>


  <gazebo reference="c1_${suffix}">
    <material>Gazebo/Blue</material>
  </gazebo>
   <gazebo reference="leg_${suffix}">
    <material>Gazebo/Green</material>
  </gazebo>


</xacro:macro>

<xacro:leg suffix="1" xyz="2 2 2" offset="2"/>
<xacro:leg suffix="2" xyz="1 1 1" offset="4"/>


</robot>
